# ุฒุฑุฑูุงูโูุง ู ุชูุงุจุน ุฏุฑ RISC-V

<div dir="rtl">

## ๐ ููุฑุณุช ูุทุงูุจ

- [ููุฏูู](#ููุฏูู)
- [ููุงูู ูพุงู](#ููุงูู-ูพุงู)
- [ุฏุณุชูุฑุงุช ูพุฑุด](#ุฏุณุชูุฑุงุช-ูพุฑุด)
- [ูุฏุฑุช ูพุดุชู (Stack)](#ูุฏุฑุช-ูพุดุชู-stack)
- [ุชูุงุจุน ุจุฑฺฏโุฏุงุฑ (Leaf Functions)](#ุชูุงุจุน-ุจุฑฺฏโุฏุงุฑ-leaf-functions)
- [ุชูุงุจุน ุจุงุฒฺฏุดุช (Recursive Functions)](#ุชูุงุจุน-ุจุงุฒฺฏุดุช-recursive-functions)
- [ุจูููโุณุงุฒ Tail Recursion](#ุจูููโุณุงุฒ-tail-recursion)
- [ฺฉุงุฑ ุจุง ุฑุดุชูโูุง](#ฺฉุงุฑ-ุจุง-ุฑุดุชูโูุง)
- [ุขุฏุฑุณโุฏู ูพุดุฑูุชู](#ุขุฏุฑุณโุฏู-ูพุดุฑูุชู)
- [ุนููุงุช ุงุชู ู ููฺฏุงูโุณุงุฒ](#ุนููุงุช-ุงุชู-ู-ููฺฏุงูโุณุงุฒ)

---

## ููุฏูู

### ๐ฏ ุฒุฑุฑูุงู (Procedure) ฺุณุชุ

ุฒุฑุฑูุงู ุง ุชุงุจุน ุงุจุฒุงุฑ ุงุณุช ฺฉู ุจุฑูุงููโููุณุงู ุจุฑุง ุณุงุฎุชุงุฑุฏู ุจุฑูุงููโูุง ุงุณุชูุงุฏู ูโฺฉููุฏ ุชุง:
- โ ุจุฑูุงููโูุง ุฎูุงูุงุชุฑ ุดููุฏ
- โ ุงุฒ ูุงุจูุช ุงุณุชูุงุฏู ูุฌุฏุฏ ฺฉุฏ ุจูุฑูโููุฏ ุดููุฏ
- โ ุชูุฑฺฉุฒ ุจุฑ ฺฉ ุจุฎุด ุฎุงุต ุงุฒ ฺฉุงุฑ ุงูฺฉุงูโูพุฐุฑ ุจุงุดุฏ

### ๐ต๏ธ ุชุดุจู ุฌุงูุจ: ุฒุฑุฑูุงู ูุงููุฏ ฺฉ ุฌุงุณูุณ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  1. ุฏุฑุงูุช ูุฃููุฑุช (ูพุงุฑุงูุชุฑูุง)    โ
โ  2. ุฑูุชู ุจู ูุญู ุนููุงุช             โ
โ  3. ุฌูุนโุขูุฑ ููุงุจุน                 โ
โ  4. ุงูุฌุงู ูุธูู                    โ
โ  5. ูพุงฺฉ ฺฉุฑุฏู ุฑุฏูพุงูุง                โ
โ  6. ุจุงุฒฺฏุดุช ุจุง ูุชุฌู                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

> **ูฺฉุชู ููู:** ูฺ ฺุฒ ูุจุงุฏ ุจุนุฏ ุงุฒ ุงุชูุงู ูุฃููุฑุช ูุฎุชู ุดูุฏ!

---

## ููุงูู ูพุงู

### ๐ ูุฑุงุญู ุงุฌุฑุง ฺฉ ุฒุฑุฑูุงู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  1๏ธโฃ  ูุฑุงุฑ ุฏุงุฏู ูพุงุฑุงูุชุฑูุง ุฏุฑ a0-a7     โ
โ  2๏ธโฃ  ุงูุชูุงู ฺฉูุชุฑู ุจู ุฒุฑุฑูุงู         โ
โ  3๏ธโฃ  ุงุฎุชุตุงุต ูุถุง ูพุดุชู                 โ
โ  4๏ธโฃ  ุงูุฌุงู ูุธูู                       โ
โ  5๏ธโฃ  ูุฑุงุฑ ุฏุงุฏู ูุชุฌู ุฏุฑ a0            โ
โ  6๏ธโฃ  ุจุงุฒฺฏุฑุฏุงูุฏู ฺฉูุชุฑู                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ๐๏ธ ฺฉููุงูุณูู ุฑุฌุณุชุฑูุง

| ุฑุฌุณุชุฑ | ูุงู ABI | ฺฉุงุฑุจุฑุฏ | ุญูุธ ุชูุณุท |
|--------|---------|--------|-----------|
| **x10-x17** | a0-a7 | ุขุฑฺฏููุงูโูุง ู ููุฏุงุฑ ุจุงุฒฺฏุดุช | Caller |
| **x1** | ra | ุขุฏุฑุณ ุจุงุฒฺฏุดุช | Callee |
| **x2** | sp | ุงุดุงุฑูโฺฏุฑ ูพุดุชู | Callee |
| **x8-x9** | s0-s1 | ุฑุฌุณุชุฑูุง ุฐุฎุฑูโุดุฏู | Callee |
| **x18-x27** | s2-s11 | ุฑุฌุณุชุฑูุง ุฐุฎุฑูโุดุฏู | Callee |
| **x5-x7, x28-x31** | t0-t6 | ุฑุฌุณุชุฑูุง ูููุช | Caller |

---

## ุฏุณุชูุฑุงุช ูพุฑุด

### 1๏ธโฃ ุฏุณุชูุฑ `jal` (Jump and Link)

**ุณุงุฎุชุงุฑ:**
```assembly
jal rd, label
```

**ุนููฺฉุฑุฏ:**
```
rd = PC + 4
PC = PC + offset
```

#### ูุซุงู ุนูู:

```assembly
# ูุฑุถ: PC = 1000
main:
    addi a0, zero, 5        # a0 = 5
    jal  ra, multiply       # ra = 1004, PC = multiply
    # ุจุฑูุงูู ุงุฒ ุงูุฌุง ุงุฏุงูู ูโุงุจุฏ
    
multiply:
    # ... ฺฉุฏ ุชุงุจุน
    jalr zero, 0(ra)        # ุจุงุฒฺฏุดุช ุจู 1004
```

**ูููุฏุงุฑ:**
```
PC: 1000  โโโโโโโโโโโโโโโโ
          โ  jal ra, fn  โ โโโ
PC: 1004  โ  next instr  โ <โโค
          โโโโโโโโโโโโโโโโ   โ
                             โ
          โโโโโโโโโโโโโโโโ   โ
          โ  function    โ <โโ
          โ     ...      โ
          โ  jalr zero   โ โโโโ
          โโโโโโโโโโโโโโโโ
```

### 2๏ธโฃ ุฏุณุชูุฑ `jalr` (Jump and Link Register)

**ุณุงุฎุชุงุฑ:**
```assembly
jalr rd, offset(rs1)
```

**ุนููฺฉุฑุฏ:**
```
rd = PC + 4
PC = rs1 + offset
```

#### ูุซุงู 1: ูพุฑุด ุจู ุชุงุจุน

```assembly
# ูุฑุถ: x10 ุญุงู ุขุฏุฑุณ ุชุงุจุน ุงุณุช
addi x10, zero, 1200    # x10 = 1200
jalr ra, 0(x10)         # ra = PC+4, PC = 1200
```

#### ูุซุงู 2: ุจุงุฒฺฏุดุช ุงุฒ ุชุงุจุน

```assembly
# ุจุงุฒฺฏุดุช ุจู caller
jalr zero, 0(ra)        # PC = ra, zero ููุดุชู ููโุดูุฏ
```

### ๐ ุดุจูโุฏุณุชูุฑุงุช (Pseudo-instructions)

```assembly
# ูพุฑุด ุณุงุฏู (ุจุฏูู ุฐุฎุฑู ุขุฏุฑุณ)
j label         โ  jal x0, label

# ูพุฑุด ุบุฑูุณุชูู
jr rs1          โ  jalr x0, 0(rs1)

# ูุฑุงุฎูุงู ุชุงุจุน
call label      โ  auipc x1, offset[31:12]
                   jalr x1, offset[11:0](x1)

# ุจุงุฒฺฏุดุช ุงุฒ ุชุงุจุน
ret             โ  jalr x0, 0(x1)
```

---

## ูุฏุฑุช ูพุดุชู (Stack)

### ๐ ููููู ูพุดุชู (Stack)

ูพุดุชู ฺฉ ุณุงุฎุชุงุฑ ุฏุงุฏู **LIFO** (ุขุฎุฑู ูุฑูุฏุ ุงููู ุฎุฑูุฌ) ุงุณุช:

```
        ุขุฏุฑุณ ุจุงูุง
        โโโโโโโโโโโโ
        โ          โ
        โโโโโโโโโโโโค  โ sp (ูพุดุชู ุฎุงู)
        โ          โ
        โโโโโโโโโโโโ
        
        Push        
        โโโโโโโบ     
        
        โโโโโโโโโโโโ
        โ   data   โ
        โโโโโโโโโโโโค  โ sp (ุจุนุฏ ุงุฒ push)
        โ          โ
        โโโโโโโโโโโโ
        ุขุฏุฑุณ ูพุงู
```

### ๐ง ุนููุงุช ูพุดุชู

#### Push (ุงุถุงูู ฺฉุฑุฏู)

```assembly
addi sp, sp, -4     # ฺฉุงูุด sp
sw   t0, 0(sp)      # ุฐุฎุฑู ุฏุงุฏู
```

#### Pop (ุจุฑุฏุงุดุชู)

```assembly
lw   t0, 0(sp)      # ุจุงุฑฺฏุฐุงุฑ ุฏุงุฏู
addi sp, sp, 4      # ุงูุฒุงุด sp
```

### ๐ฆ ุฐุฎุฑู ฺูุฏ ุฑุฌุณุชุฑ

```assembly
# ุฐุฎุฑู 3 ุฑุฌุณุชุฑ
addi sp, sp, -12
sw   ra, 8(sp)      # ุฐุฎุฑู ุขุฏุฑุณ ุจุงุฒฺฏุดุช
sw   s0, 4(sp)      # ุฐุฎุฑู s0
sw   s1, 0(sp)      # ุฐุฎุฑู s1

# ... ฺฉุฏ ุชุงุจุน ...

# ุจุงุฒุงุจ
lw   s1, 0(sp)
lw   s0, 4(sp)
lw   ra, 8(sp)
addi sp, sp, 12
```

**ูููุฏุงุฑ ูพุดุชู:**
```
ูุจู ุงุฒ ูุฑุงุฎูุงู     ุจุนุฏ ุงุฒ Push        ุจุนุฏ ุงุฒ Pop
โโโโโโโโโโโโ        โโโโโโโโโโโโ        โโโโโโโโโโโโ
โ          โ        โ    ra    โ 8(sp)  โ          โ
โ          โ        โโโโโโโโโโโโค        โ          โ
โ          โ        โ    s0    โ 4(sp)  โ          โ
โ          โ        โโโโโโโโโโโโค        โ          โ
โ          โ   sp โ โ    s1    โ 0(sp)  โ          โ โ sp
โโโโโโโโโโโโ        โโโโโโโโโโโโ        โโโโโโโโโโโโ
```

---

## ุชูุงุจุน ุจุฑฺฏโุฏุงุฑ (Leaf Functions)

### ๐ ุชุนุฑู

**ุชุงุจุน ุจุฑฺฏโุฏุงุฑ:** ุชุงุจุน ฺฉู ูฺ ุชุงุจุน ุฏฺฏุฑ ุฑุง ูุฑุงุฎูุงู ููโฺฉูุฏ.

### ๐จ ูุซุงู: ูุญุงุณุจู ุณุงุฏู

**ฺฉุฏ C:**
```c
int leaf_example(int g, int h, int i, int j) {
    int f;
    f = (g + h) - (i + j);
    return f;
}
```

**ฺฉุฏ RISC-V:**
```assembly
leaf_example:
    # Prologue - ุฐุฎุฑู ุฑุฌุณุชุฑูุง
    addi sp, sp, -12        # ุชุฎุตุต ูุถุง
    sw   x5, 8(sp)          # ุฐุฎุฑู x5
    sw   x6, 4(sp)          # ุฐุฎุฑู x6
    sw   x20, 0(sp)         # ุฐุฎุฑู x20
    
    # Body - ูุญุงุณุจุงุช
    add  x5, x10, x11       # x5 = g + h
    add  x6, x12, x13       # x6 = i + j
    sub  x20, x5, x6        # x20 = (g+h) - (i+j)
    
    # ูุชุฌู ุฏุฑ a0
    addi x10, x20, 0        # a0 = f
    
    # Epilogue - ุจุงุฒุงุจ ุฑุฌุณุชุฑูุง
    lw   x20, 0(sp)         # ุจุงุฒุงุจ x20
    lw   x6, 4(sp)          # ุจุงุฒุงุจ x6
    lw   x5, 8(sp)          # ุจุงุฒุงุจ x5
    addi sp, sp, 12         # ุขุฒุงุฏุณุงุฒ ูุถุง
    
    # ุจุงุฒฺฏุดุช
    jalr zero, 0(ra)        # ret
```

### ๐ ูููุฏุงุฑ ูุฑุงุฎูุงู

```
Caller                          Callee
โโโโโโโโโโโโโ                   โโโโโโโโโโโโโโโโ
โ           โ                   โ              โ
โ ุชูุธู     โ โโโโa0-a7โโโโโบ   โ ุฏุฑุงูุช       โ
โ ุขุฑฺฏููุงูโูุงโ                   โ ุขุฑฺฏููุงูโูุง   โ
โ           โ                   โ              โ
โ jal ra,fn โ โโโโโโโโโโโโโโโโโบ โ ูพุฑุฏุงุฒุด      โ
โ           โ                   โ              โ
โ ุฏุฑุงูุช    โ โโโโโa0โโโโโโโโโโโ ุจุฑฺฏุฑุฏุงูุฏู   โ
โ ูุชุฌู     โ                   โ ูุชุฌู        โ
โ           โ                   โ              โ
โโโโโโโโโโโโโ                   โโโโโโโโโโโโโโโโ
```

---

## ุชูุงุจุน ุจุงุฒฺฏุดุช (Recursive Functions)

### ๐ ููููู ุจุงุฒฺฏุดุช

ุชุงุจุน ุจุงุฒฺฏุดุช ุชุงุจุน ุงุณุช ฺฉู ุฎูุฏ ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ.

### ๐ฏ ูุซุงู 1: ูุญุงุณุจู ูุงฺฉุชูุฑู

**ฺฉุฏ C:**
```c
int fact(int n) {
    if (n < 1)
        return 1;
    else
        return n * fact(n - 1);
}
```

**ฺฉุฏ RISC-V:**
```assembly
fact:
    # Prologue
    addi sp, sp, -8         # ุชุฎุตุต ูุถุง
    sw   ra, 4(sp)          # ุฐุฎุฑู ุขุฏุฑุณ ุจุงุฒฺฏุดุช
    sw   x10, 0(sp)         # ุฐุฎุฑู n
    
    # ุจุฑุฑุณ ุดุฑุท ูพุงู
    addi x5, x10, -1        # x5 = n - 1
    bge  x5, x0, L1         # ุงฺฏุฑ n-1 >= 0 ุจู L1 ุจุฑู
    
    # ุญุงูุช ูพุงู: n < 1
    addi x10, x0, 1         # return 1
    addi sp, sp, 8          # ุขุฒุงุฏุณุงุฒ ูพุดุชู
    jalr x0, 0(ra)          # ุจุงุฒฺฏุดุช
    
L1: # ุญุงูุช ุจุงุฒฺฏุดุช: n >= 1
    addi x10, x10, -1       # n = n - 1
    jal  ra, fact           # ูุฑุงุฎูุงู fact(n-1)
    
    # ูุญุงุณุจู n * fact(n-1)
    lw   x10, 0(sp)         # ุจุงุฒุงุจ n
    lw   ra, 4(sp)          # ุจุงุฒุงุจ ra
    addi sp, sp, 8          # ุขุฒุงุฏุณุงุฒ ูพุดุชู
    
    mul  x10, x10, x10      # n * fact(n-1)
    jalr x0, 0(ra)          # ุจุงุฒฺฏุดุช
```

### ๐ ูููุฏุงุฑ ูุฑุงุฎูุงู fact(3)

```
fact(3)
  โ
  โโโบ fact(2)
  โ     โ
  โ     โโโบ fact(1)
  โ     โ     โ
  โ     โ     โโโบ fact(0) โ return 1
  โ     โ     
  โ     โโโโ return 1 * 1 = 1
  โ     
  โโโโโ return 2 * 1 = 2

return 3 * 2 = 6
```

### ๐ ูุถุนุช ูพุดุชู ุฏุฑ fact(3)

```
         Initial          fact(3)           fact(2)           fact(1)
      โโโโโโโโโโโโ    โโโโโโโโโโโโ    โโโโโโโโโโโโ    โโโโโโโโโโโโ
      โ          โ    โ  ra(3)   โ    โ  ra(2)   โ    โ  ra(1)   โ
      โ          โ    โ  n=3     โ    โ  n=2     โ    โ  n=1     โ
      โ          โ    โโโโโโโโโโโโค    โโโโโโโโโโโโค    โโโโโโโโโโโโค
      โ          โ    โ  ra(2)   โ    โ  ra(1)   โ    โ          โ
      โ          โ    โ  n=2     โ    โ  n=1     โ    โ          โ
      โ          โ    โโโโโโโโโโโโค    โโโโโโโโโโโโค    โ          โ
      โ          โ    โ  ra(1)   โ    โ          โ    โ          โ
spโ   โ          โ    โ  n=1     โ    โ          โ    โ          โ
      โโโโโโโโโโโโ    โโโโโโโโโโโโ    โโโโโโโโโโโโ    โโโโโโโโโโโโ
```

---

## ุจูููโุณุงุฒ Tail Recursion

### ๐ Tail Call ฺุณุชุ

**Tail Call:** ุฒูุงู ฺฉู ุขุฎุฑู ุนููุงุช ฺฉ ุชุงุจุนุ ูุฑุงุฎูุงู ุฎูุฏ ุชุงุจุน ุจุงุดุฏ.

### ๐ก ูุซุงู: ุฌูุน ุงุนุฏุงุฏ

**ฺฉุฏ C:**
```c
int sum(int n, int acc) {
    if (n > 0)
        return sum(n - 1, acc + n);  // Tail call
    else
        return acc;
}
```

**ฺฉุฏ RISC-V (ุจูููโุดุฏู):**
```assembly
sum:
    ble  x10, x0, sum_exit      # ุงฺฏุฑ n <= 0 ุฎุฑูุฌ
    add  x11, x11, x10          # acc = acc + n
    addi x10, x10, -1           # n = n - 1
    jal  x0, sum                # ูพุฑุด ุจุฏูู ุฐุฎุฑู
sum_exit:
    addi x10, x11, 0            # ูุชุฌู = acc
    jalr x0, 0(ra)              # ุจุงุฒฺฏุดุช
```

### ๐ ููุงุณู ุนููฺฉุฑุฏ

| ูฺฺฏ | ุจุงุฒฺฏุดุช ูุนููู | Tail Recursion |
|-------|---------------|----------------|
| ุงุณุชูุงุฏู ุงุฒ ูพุดุชู | โ O(n) | โ O(1) |
| ุณุฑุนุช | ูุชูุณุท | ุณุฑุน |
| ูุตุฑู ุญุงูุธู | ุฒุงุฏ | ฺฉู |
| ุงุญุชูุงู Stack Overflow | ุจุงูุง | ูพุงู |

### ๐ ุชุจุฏู ุจู ุญููู

```assembly
# ูุณุฎู ุชฺฉุฑุงุฑ (Loop) - ฺฉุงุฑุขูุฏุชุฑู
sum_loop:
    addi x12, x0, 0             # acc = 0
loop:
    ble  x10, x0, exit          # ุงฺฏุฑ n <= 0 ุฎุฑูุฌ
    add  x12, x12, x10          # acc += n
    addi x10, x10, -1           # n--
    jal  x0, loop               # ุชฺฉุฑุงุฑ
exit:
    addi x10, x12, 0            # ูุชุฌู
    jalr x0, 0(ra)
```

---

## ฺฉุงุฑ ุจุง ุฑุดุชูโูุง

### ๐ ุฑุดุชูโูุง ุฏุฑ C

ุฏุฑ Cุ ุฑุดุชูโูุง ุจุง ฺฉุงุฑุงฺฉุชุฑ null (`\0`) ุฎุงุชูู ูโุงุจูุฏ:

```c
"Hello" โ {'H', 'e', 'l', 'l', 'o', '\0'}
         { 72,  101, 108, 108, 111,   0 }
```

### ๐จ ุฏุณุชูุฑุงุช ุจุงุช

```assembly
lb   t0, 0(a0)      # ุจุงุฑฺฏุฐุงุฑ ุจุงุช ุจุง ุนูุงูุช
lbu  t0, 0(a0)      # ุจุงุฑฺฏุฐุงุฑ ุจุงุช ุจุฏูู ุนูุงูุช
sb   t0, 0(a1)      # ุฐุฎุฑู ุจุงุช
```

### ๐ ูุซุงู: strcpy

**ฺฉุฏ C:**
```c
void strcpy(char x[], char y[]) {
    size_t i = 0;
    while ((x[i] = y[i]) != '\0')
        i += 1;
}
```

**ฺฉุฏ RISC-V:**
```assembly
strcpy:
    # Prologue
    addi sp, sp, -4
    sw   x19, 0(sp)
    
    # i = 0
    add  x19, x0, x0        # i = 0
    
L1: # ุญููู ฺฉูพ
    add  x5, x19, x11       # x5 = ุขุฏุฑุณ y[i]
    lbu  x6, 0(x5)          # x6 = y[i]
    add  x7, x19, x10       # x7 = ุขุฏุฑุณ x[i]
    sb   x6, 0(x7)          # x[i] = y[i]
    beq  x6, x0, L2         # ุงฺฏุฑ '\0' ุจูุฏ ุฎุฑูุฌ
    addi x19, x19, 1        # i++
    jal  x0, L1             # ุชฺฉุฑุงุฑ
    
L2: # Epilogue
    lw   x19, 0(sp)
    addi sp, sp, 4
    jalr x0, 0(ra)
```

### ๐ Unicode ู Java

**ุฏุฑ Java:**
- ูุฑ ฺฉุงุฑุงฺฉุชุฑ 16 ุจุช (UTF-16)
- ุงุณุชูุงุฏู ุงุฒ `lhu` ู `sh` ุจุฑุง halfword

```assembly
lhu  t0, 0(a0)      # ุจุงุฑฺฏุฐุงุฑ ฺฉุงุฑุงฺฉุชุฑ Unicode
sh   t0, 0(a1)      # ุฐุฎุฑู ฺฉุงุฑุงฺฉุชุฑ Unicode
```

### ๐ ููุงุณู ASCII vs Binary

```
ุนุฏุฏ: 1,000,000,000

ASCII: "1000000000"
- 10 ฺฉุงุฑุงฺฉุชุฑ ร 8 ุจุช = 80 ุจุช

Binary: 32 ุจุช
- ุงูุฒุงุด ูุถุง: 80/32 = 2.5x
```

---

## ุขุฏุฑุณโุฏู ูพุดุฑูุชู

### ๐ฏ ููุงุฏุฑ ููุฑ ุจุฒุฑฺฏ

ุจุฑุง ููุงุฏุฑ ุจุฒุฑฺฏุชุฑ ุงุฒ 12 ุจุช:

#### ุฏุณุชูุฑ `lui` (Load Upper Immediate)

```assembly
lui rd, imm20
```

**ุนููฺฉุฑุฏ:**
```
rd[31:12] = imm20
rd[11:0]  = 0
```

### ๐ ูุซุงู: ุจุงุฑฺฏุฐุงุฑ 32 ุจุช

**ูุฏู:** ุจุงุฑฺฏุฐุงุฑ `0x003D0500` ุฏุฑ x19

```assembly
# ูุฑุญูู 1: ุจุงุฑฺฏุฐุงุฑ 20 ุจุช ุจุงูุง
lui  x19, 0x3D          # x19 = 0x003D0000

# ูุฑุญูู 2: ุงูุฒูุฏู 12 ุจุช ูพุงู
addi x19, x19, 0x500    # x19 = 0x003D0500
```

**ูููุฏุงุฑ:**
```
Step 1: lui x19, 0x3D
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโ
โ   0x003D (20 ุจุช)      โ   0 (12)   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโ

Step 2: addi x19, x19, 0x500
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโ
โ   0x003D (20 ุจุช)      โ  0x500(12) โ
โโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโ
         = 0x003D0500
```

### โ๏ธ ูุดฺฉู ุจุช ุนูุงูุช

ุงฺฏุฑ ุจุช 11 ุจุฑุงุจุฑ 1 ุจุงุดุฏ:

```assembly
# ุจุงุฑฺฏุฐุงุฑ 0x003D0800
# ุจุช 11 ุจุฑุงุจุฑ 1 ุงุณุชุ ูพุณ addi ููู ูโุดูุฏ!

# ุฑุงูโุญู: ุงูุฒูุฏู 1 ุจู ูุณูุช ุจุงูุง
lui  x19, 0x3E          # 0x3E = 0x3D + 1
addi x19, x19, -0x7FF   # ุฌุจุฑุงู ููู ุดุฏู
```

### ๐ ุขุฏุฑุณโุฏู PC-relative

```assembly
# ุขุฏุฑุณโุฏู ูุณุจุช ุจู PC
beq  rs1, rs2, label    # PC = PC + offset

# ูุญุฏูุฏู: [-4096, +4094]
# ููุงุตู 2 ุจุงุช (ุขุฏุฑุณโูุง ุฒูุฌ)
```

**ูุซุงู:**
```assembly
    # PC = 1000
    beq  x10, x11, target
    # ุงฺฏุฑ x10 == x11
    # PC = 1000 + offset
    
target:
    # ...
```

### ๐ ุงููุงุน ุขุฏุฑุณโุฏู

| ููุน | ูุฑูุช | ูุซุงู | ูุญุฏูุฏู |
|-----|------|------|---------|
| **Immediate** | `I` | `addi t0, t1, 10` | [-2ยนยน, 2ยนยน-1] |
| **Base** | `I/S` | `lw t0, 8(sp)` | [-2ยนยน, 2ยนยน-1] |
| **PC-relative** | `B/J` | `beq t0, t1, L` | [-2ยนยฒ, 2ยนยฒ-1] |
| **Upper** | `U` | `lui t0, 0x1234` | 20 ุจุช |

---

## ุนููุงุช ุงุชู ู ููฺฏุงูโุณุงุฒ

### โ๏ธ ฺุฑุง ุนููุงุช ุงุชูุ

ุฏุฑ ุณุณุชูโูุง ฺูุฏ ูุณุชูโุงุ ุจุฑุง ุฌููฺฏุฑ ุงุฒ **Data Race** ูุงุฒ ุจู ุนููุงุช ุงุชู ุฏุงุฑู.

### ๐ ูุซุงู: ููู ุณุงุฏู

**ุจุฏูู ููฺฏุงูโุณุงุฒ (ุงุดุชุจุงู!):**
```assembly
# Thread 1              # Thread 2
lw   t0, 0(a0)         lw   t0, 0(a0)
beq  t0, x0, locked    beq  t0, x0, locked
li   t0, 1             li   t0, 1
sw   t0, 0(a0)         sw   t0, 0(a0)
# โ๏ธ ูุฑ ุฏู ููฺฉู ุงุณุช ููู ุฑุง ุจฺฏุฑูุฏ!
```

### ๐ง ุฏุณุชูุฑุงุช ุงุชู ุฏุฑ RISC-V

#### 1๏ธโฃ Load-Reserved / Store-Conditional

```assembly
lr.w  rd, (rs1)        # ุจุงุฑฺฏุฐุงุฑ ุจุง ุฑุฒุฑู
sc.w  rd, rs2, (rs1)   # ุฐุฎุฑู ุดุฑุท
```

**ุนููฺฉุฑุฏ:**
```
lr.w:  rd = M[rs1], ุฑุฒุฑู M[rs1]
sc.w:  if (M[rs1] ุฑุฒุฑู ุงุณุช)
           M[rs1] = rs2, rd = 0
       else
           rd = 1
```

#### ูุซุงู: ูพุงุฏูโุณุงุฒ ููู

```assembly
acquire_lock:
    li       t0, 1              # ููุฏุงุฑ ููู = 1
try_lock:
    lr.w     t1, (a0)           # ุจุงุฑฺฏุฐุงุฑ ุจุง ุฑุฒุฑู
    bnez     t1, try_lock       # ุงฺฏุฑ ููู ฺฏุฑูุชู ุดุฏูุ ุชฺฉุฑุงุฑ
    sc.w     t2, t0, (a0)       # ุชูุงุด ุจุฑุง ููู
    bnez     t2, try_lock       # ุงฺฏุฑ ูุงููููุ ุชฺฉุฑุงุฑ
    ret                         # ูููู!

release_lock:
    sw       zero, 0(a0)        # ุขุฒุงุฏ ฺฉุฑุฏู ููู
    ret
```

#### 2๏ธโฃ Atomic Memory Operations (AMO)

```assembly
# Atomic Swap
amoswap.w   rd, rs2, (rs1)
# rd = M[rs1], M[rs1] = rs2

# Atomic Add
amoadd.w    rd, rs2, (rs1)
# rd = M[rs1], M[rs1] += rs2

# Atomic AND
amoand.w    rd, rs2, (rs1)
# rd = M[rs1], M[rs1] &= rs2

# Atomic OR
amoor.w     rd, rs2, (rs1)
# rd = M[rs1], M[rs1] |= rs2

# Atomic XOR
amoxor.w    rd, rs2, (rs1)
# rd = M[rs1], M[rs1] ^= rs2

# Atomic Min/Max
amomin.w    rd, rs2, (rs1)
amominu.w   rd, rs2, (rs1)
amomax.w    rd, rs2, (rs1)
amomaxu.w   rd, rs2, (rs1)
```

### ๐ฏ ูุซุงู: ุดูุงุฑูุฏู ุงุชู

```assembly
atomic_increment:
    li       t0, 1
    amoadd.w zero, t0, (a0)    # M[a0] += 1
    ret
```

### ๐ ูุซุงู: Spinlock ุจุง AMO

```assembly
spinlock_acquire:
    li       t0, 1
spin:
    amoswap.w.aq t1, t0, (a0)  # ุชูุงุด ุจุฑุง swap
    bnez     t1, spin           # ุงฺฏุฑ ูุจูุงู 1 ุจูุฏุ ุตุจุฑ ฺฉู
    ret

spinlock_release:
    amoswap.w.rl zero, zero, (a0)
    ret
```

### ๐ ููุงุณู ุฑูุดโูุง

| ุฑูุด | ูพฺุฏฺฏ | ุณุฑุจุงุฑ | ุงูุนุทุงูโูพุฐุฑ |
|-----|---------|-------|--------------|
| **LR/SC** | ูุชูุณุท | ฺฉู | ุจุงูุง |
| **AMO** | ุณุงุฏู | ุจุณุงุฑ ฺฉู | ูุชูุณุท |
| **ุจุฏูู ููฺฏุงูโุณุงุฒ** | ุฎู ุณุงุฏู | ุตูุฑ | โ ุบุฑุงูู |

### โ๏ธ Ordering Modifiers

```assembly
# Acquire - ุชุถูู ุชุฑุชุจ ุจุนุฏ ุงุฒ load
lr.w.aq    rd, (rs1)
amoadd.w.aq rd, rs2, (rs1)

# Release - ุชุถูู ุชุฑุชุจ ูุจู ุงุฒ store
sc.w.rl    rd, rs2, (rs1)
amoswap.w.rl rd, rs2, (rs1)

# AcqRel - ูุฑ ุฏู
lr.w.aqrl  rd, (rs1)
sc.w.aqrl  rd, rs2, (rs1)
```

### ๐งต ูุซุงู ฺฉุงูู: Producer-Consumer

```assembly
# ุณุงุฎุชุงุฑ ุตู
# Offset 0: head index
# Offset 4: tail index
# Offset 8+: buffer

producer:
    # ุจุงุฑฺฏุฐุงุฑ tail ุจุง acquire
    lr.w.aq  t0, 4(a0)          # t0 = tail
    addi     t1, t0, 1          # t1 = tail + 1
    andi     t1, t1, 0xFF       # mod 256
    
    lw       t2, 0(a0)          # t2 = head
    beq      t1, t2, queue_full # ุงฺฏุฑ ูพุฑ ุจูุฏ
    
    # ููุดุชู ุฏุงุฏู
    slli     t3, t0, 2          # offset = tail * 4
    addi     t3, t3, 8          # + header size
    add      t3, a0, t3         # ุขุฏุฑุณ ฺฉุงูู
    sw       a1, 0(t3)          # ููุดุชู ุฏุงุฏู
    
    # ุจูโุฑูุฒุฑุณุงู tail ุจุง release
    sc.w.rl  t4, t1, 4(a0)      # tail = tail + 1
    bnez     t4, producer       # retry ุฏุฑ ุตูุฑุช ุดฺฉุณุช
    li       a0, 0              # ููููุช
    ret

queue_full:
    li       a0, -1             # ุฎุทุง
    ret

consumer:
    # ุจุงุฑฺฏุฐุงุฑ head ุจุง acquire
    lr.w.aq  t0, 0(a0)          # t0 = head
    lw       t1, 4(a0)          # t1 = tail
    beq      t0, t1, queue_empty # ุงฺฏุฑ ุฎุงู ุจูุฏ
    
    # ุฎูุงูุฏู ุฏุงุฏู
    slli     t2, t0, 2          # offset = head * 4
    addi     t2, t2, 8
    add      t2, a0, t2
    lw       a1, 0(t2)          # ุฎูุงูุฏู ุฏุงุฏู
    
    # ุจูโุฑูุฒุฑุณุงู head ุจุง release
    addi     t0, t0, 1
    andi     t0, t0, 0xFF
    sc.w.rl  t3, t0, 0(a0)      # head = head + 1
    bnez     t3, consumer       # retry
    li       a0, 0
    ret

queue_empty:
    li       a0, -1
    ret
```

---

## ๐ก ูฺฉุงุช ู ุจูุชุฑู ุฑูุดโูุง

### โ ูฺฉุงุช ููู ุฒุฑุฑูุงูโูุง

#### 1๏ธโฃ ูุฏุฑุช ุฑุฌุณุชุฑูุง

```assembly
# โ ุงุดุชุจุงู - ุนุฏู ุฐุฎุฑู s0
my_function:
    addi s0, a0, 10      # ุชุบุฑ s0 ุจุฏูู ุฐุฎุฑู
    ret

# โ ุตุญุญ
my_function:
    addi sp, sp, -4
    sw   s0, 0(sp)       # ุฐุฎุฑู s0
    addi s0, a0, 10
    lw   s0, 0(sp)       # ุจุงุฒุงุจ s0
    addi sp, sp, 4
    ret
```

#### 2๏ธโฃ ูุฏุฑุช ูพุดุชู

```assembly
# โ ุงุดุชุจุงู - ุนุฏู ุชุฑุงุฒ ูพุดุชู
addi sp, sp, -6          # 6 ุจุงุช - ุชุฑุงุฒ ูุณุช!

# โ ุตุญุญ - ุชุฑุงุฒ 4 ุจุงุช ุง 8 ุจุงุช
addi sp, sp, -8          # 8 ุจุงุช - ุชุฑุงุฒ ุงุณุช
```

#### 3๏ธโฃ ูุฑุงููุด ูฺฉูุฏ!

```assembly
# โ ุงุดุชุจุงู - ูุฑุงููุด ุจุงุฒฺฏุฑุฏุงูุฏู sp
function:
    addi sp, sp, -16
    # ... ฺฉุฏ ...
    ret                  # sp ูููุฒ -16 ุงุณุช!

# โ ุตุญุญ
function:
    addi sp, sp, -16
    # ... ฺฉุฏ ...
    addi sp, sp, 16      # ุจุงุฒฺฏุฑุฏุงูุฏู sp
    ret
```

### ๐ ฺฺฉโูุณุช ุชุงุจุน

```
โ ุขุง ุฑุฌุณุชุฑูุง s0-s11 ุฐุฎุฑู ุดุฏูุฏุ
โ ุขุง ra ุฐุฎุฑู ุดุฏ (ุงฺฏุฑ ุชุงุจุน ุฏฺฏุฑ ูุฑุงุฎูุงู ูโุดูุฏ)?
โ ุขุง sp ุจู ุงูุฏุงุฒู ููุงุณุจ ุชุฑุงุฒ ุงุณุชุ
โ ุขุง sp ุฏุฑ ูพุงุงู ุจุงุฒฺฏุฑุฏุงูุฏู ุดุฏุ
โ ุขุง ูุชุฌู ุฏุฑ a0 ูุฑุงุฑ ุฏุงุฑุฏุ
โ ุขุง ุจุงุฒฺฏุดุช ุจุง ret ุงูุฌุงู ุดุฏุ
```

### ๐ฏ ุจูููโุณุงุฒโูุง

#### 1๏ธโฃ ุงุณุชูุงุฏู ุงุฒ ุฑุฌุณุชุฑูุง ูููุช

```assembly
# โ ฺฉูโุจุงุฒุฏู - ุงุณุชูุงุฏู ุฒุงุฏ ุงุฒ ุญุงูุธู
function:
    addi sp, sp, -12
    sw   t0, 8(sp)
    sw   t1, 4(sp)
    sw   t2, 0(sp)
    # ููุท t0 ู t1 ุงุณุชูุงุฏู ูโุดููุฏ
    
# โ ุจููู - ููุท ุขูฺู ูุงุฒู ุงุณุช
function:
    addi sp, sp, -8
    sw   t0, 4(sp)
    sw   t1, 0(sp)
```

#### 2๏ธโฃ Leaf Function Optimization

```assembly
# ุงฺฏุฑ ุชุงุจุน ููุท ุงุฒ ุฑุฌุณุชุฑูุง ูููุช ุงุณุชูุงุฏู ฺฉูุฏ
# ูุงุฒ ุจู ุฐุฎุฑู ุฏุฑ ูพุดุชู ูุณุช!
fast_add:
    add  a0, a0, a1      # ุงุณุชูุงุฏู ููุท ุงุฒ a0 ู a1
    ret                  # ุจุฏูู prologue/epilogue
```

#### 3๏ธโฃ Tail Call Optimization

```assembly
# โ ุจุฏูู ุจูููโุณุงุฒ
function_a:
    # ... ฺฉุฏ ...
    jal  ra, function_b
    jalr zero, 0(ra)     # ุจุงุฒฺฏุดุช ููุฑ

# โ ุจุง ุจูููโุณุงุฒ (Tail Call)
function_a:
    # ... ฺฉุฏ ...
    jal  zero, function_b # ูพุฑุด ูุณุชูู
```

---

## ๐ ุงุดฺฉุงูโุฒุฏุง (Debugging)

### ๐ ุงุดุชุจุงูุงุช ุฑุงุฌ

#### 1๏ธโฃ Stack Corruption

**ุนูุงุฆู:**
- Segmentation Fault
- ุจุงุฒฺฏุดุช ุจู ุขุฏุฑุณ ุงุดุชุจุงู
- ููุงุฏุฑ ูุงุฏุฑุณุช ุฏุฑ ุฑุฌุณุชุฑูุง

**ุฑุงูโุญู:**
```assembly
# ุงุถุงูู ฺฉุฑุฏู Magic Number ุจุฑุง ุชุดุฎุต
function:
    addi sp, sp, -16
    li   t0, 0xDEADBEEF
    sw   t0, 12(sp)      # canary
    # ... ฺฉุฏ ...
    lw   t1, 12(sp)
    bne  t0, t1, error   # ุจุฑุฑุณ corruption
    addi sp, sp, 16
    ret
```

#### 2๏ธโฃ Register Clobbering

```assembly
# โ ูุดฺฉู
caller:
    li   s0, 42          # ููุฏุงุฑ ููู ุฏุฑ s0
    jal  ra, callee
    # ุงูุชุธุงุฑ: s0 = 42
    # ูุงูุนุช: s0 ููฺฉู ุงุณุช ุชุบุฑ ฺฉุฑุฏู ุจุงุดุฏ!

# โ ุฑุงูโุญู
callee:
    addi sp, sp, -4
    sw   s0, 0(sp)       # ุญูุธ s0
    # ... ุงุณุชูุงุฏู ุงุฒ s0 ...
    lw   s0, 0(sp)       # ุจุงุฒฺฏุฑุฏุงูุฏู
    addi sp, sp, 4
    ret
```

#### 3๏ธโฃ Infinite Recursion

```assembly
# โ ุฎุทุฑ: Stack Overflow
bad_factorial:
    addi sp, sp, -8
    sw   ra, 4(sp)
    sw   a0, 0(sp)
    # ูุฑุงููุด ุจุฑุฑุณ base case!
    addi a0, a0, -1
    jal  ra, bad_factorial
    # ...

# โ ุตุญุญ
good_factorial:
    addi sp, sp, -8
    sw   ra, 4(sp)
    sw   a0, 0(sp)
    li   t0, 1
    ble  a0, t0, base_case  # ุจุฑุฑุณ base case
    # ...
```

### ๐๏ธ ุงุจุฒุงุฑูุง ุงุดฺฉุงูโุฒุฏุง

#### ุงุณุชูุงุฏู ุงุฒ Breakpoint

```assembly
# ุงุถุงูู ฺฉุฑุฏู breakpoint ุฏุฑ RARS
    ebreak               # ุชููู ุจุฑุง ุงุดฺฉุงูโุฒุฏุง
```

#### ฺุงูพ ุงุดฺฉุงูโุฒุฏุง

```assembly
debug_print:
    # ฺุงูพ ููุฏุงุฑ a0
    li   a7, 1           # print_int syscall
    ecall
    ret
```

---

## ๐ ููุงุจุน ู ูุซุงูโูุง ุนูู

### ๐ ูุซุงูโูุง ูพุดุฑูุชู

#### 1๏ธโฃ ูุญุงุณุจู ูุจููุงฺ (ุจุงุฒฺฏุดุช)

```assembly
# int fib(int n)
fibonacci:
    addi sp, sp, -12
    sw   ra, 8(sp)
    sw   s0, 4(sp)
    sw   s1, 0(sp)
    
    li   t0, 2
    blt  a0, t0, fib_base
    
    # ูุญุงุณุจู fib(n-1)
    addi a0, a0, -1
    jal  ra, fibonacci
    mv   s0, a0          # s0 = fib(n-1)
    
    # ูุญุงุณุจู fib(n-2)
    lw   a0, 4(sp)       # ุจุงุฒุงุจ n
    addi a0, a0, -2
    jal  ra, fibonacci
    mv   s1, a0          # s1 = fib(n-2)
    
    # ุฌูุน
    add  a0, s0, s1
    j    fib_end
    
fib_base:
    # return n
    j    fib_end
    
fib_end:
    lw   ra, 8(sp)
    lw   s0, 4(sp)
    lw   s1, 0(sp)
    addi sp, sp, 12
    ret
```

#### 2๏ธโฃ ูุฑุชุจโุณุงุฒ ุญุจุงุจ

```assembly
# void bubble_sort(int arr[], int n)
bubble_sort:
    addi sp, sp, -20
    sw   ra, 16(sp)
    sw   s0, 12(sp)      # arr
    sw   s1, 8(sp)       # n
    sw   s2, 4(sp)       # i
    sw   s3, 0(sp)       # j
    
    mv   s0, a0          # s0 = arr
    mv   s1, a1          # s1 = n
    
    li   s2, 0           # i = 0
outer_loop:
    bge  s2, s1, done
    
    li   s3, 0           # j = 0
    sub  t0, s1, s2
    addi t0, t0, -1      # n - i - 1
    
inner_loop:
    bge  s3, t0, outer_next
    
    # ูุญุงุณุจู ุขุฏุฑุณ arr[j]
    slli t1, s3, 2
    add  t1, s0, t1
    lw   t2, 0(t1)       # arr[j]
    lw   t3, 4(t1)       # arr[j+1]
    
    # ููุงุณู ู ุชุนูุถ
    ble  t2, t3, no_swap
    sw   t3, 0(t1)
    sw   t2, 4(t1)
    
no_swap:
    addi s3, s3, 1       # j++
    j    inner_loop
    
outer_next:
    addi s2, s2, 1       # i++
    j    outer_loop
    
done:
    lw   ra, 16(sp)
    lw   s0, 12(sp)
    lw   s1, 8(sp)
    lw   s2, 4(sp)
    lw   s3, 0(sp)
    addi sp, sp, 20
    ret
```

#### 3๏ธโฃ ุฌุณุชุฌู ุฏูุฏู

```assembly
# int binary_search(int arr[], int n, int target)
binary_search:
    addi sp, sp, -16
    sw   ra, 12(sp)
    sw   s0, 8(sp)       # left
    sw   s1, 4(sp)       # right
    sw   s2, 0(sp)       # mid
    
    li   s0, 0           # left = 0
    addi s1, a1, -1      # right = n - 1
    
search_loop:
    bgt  s0, s1, not_found
    
    # ูุญุงุณุจู mid
    add  s2, s0, s1
    srli s2, s2, 1       # mid = (left + right) / 2
    
    # ุขุฏุฑุณ arr[mid]
    slli t0, s2, 2
    add  t0, a0, t0
    lw   t1, 0(t0)       # arr[mid]
    
    # ููุงุณู
    beq  t1, a2, found   # arr[mid] == target
    blt  t1, a2, search_right
    
search_left:
    addi s1, s2, -1      # right = mid - 1
    j    search_loop
    
search_right:
    addi s0, s2, 1       # left = mid + 1
    j    search_loop
    
found:
    mv   a0, s2          # return mid
    j    search_end
    
not_found:
    li   a0, -1          # return -1
    
search_end:
    lw   ra, 12(sp)
    lw   s0, 8(sp)
    lw   s1, 4(sp)
    lw   s2, 0(sp)
    addi sp, sp, 16
    ret
```

---

## ๐จ ุงูฺฏููุง ุทุฑุงุญ

### ๐๏ธ ุณุงุฎุชุงุฑ ุงุณุชุงูุฏุงุฑุฏ ุชุงุจุน

```assembly
function_name:
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # PROLOGUE
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    # 1. ุชุฎุตุต ูุถุง ูพุดุชู (ูุถุฑุจ 8 ุง 16)
    addi sp, sp, -FRAME_SIZE
    
    # 2. ุฐุฎุฑู ra (ุงฺฏุฑ ุชุงุจุน ุฏฺฏุฑ ูุฑุงุฎูุงู ูโุดูุฏ)
    sw   ra, FRAME_SIZE-4(sp)
    
    # 3. ุฐุฎุฑู ุฑุฌุณุชุฑูุง s (ุงฺฏุฑ ุงุณุชูุงุฏู ูโุดููุฏ)
    sw   s0, FRAME_SIZE-8(sp)
    sw   s1, FRAME_SIZE-12(sp)
    # ...
    
    # 4. ุฐุฎุฑู fp ู ุชูุธู ูุฑู ุฌุฏุฏ (ุงุฎุชุงุฑ)
    sw   fp, FRAME_SIZE-16(sp)
    addi fp, sp, FRAME_SIZE
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # BODY
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    # ฺฉุฏ ุงุตู ุชุงุจุน
    # ...
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # EPILOGUE
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    # 1. ุจุงุฒุงุจ fp (ุงฺฏุฑ ุงุณุชูุงุฏู ุดุฏู)
    lw   fp, FRAME_SIZE-16(sp)
    
    # 2. ุจุงุฒุงุจ ุฑุฌุณุชุฑูุง s
    lw   s1, FRAME_SIZE-12(sp)
    lw   s0, FRAME_SIZE-8(sp)
    
    # 3. ุจุงุฒุงุจ ra
    lw   ra, FRAME_SIZE-4(sp)
    
    # 4. ุขุฒุงุฏุณุงุฒ ูุถุง ูพุดุชู
    addi sp, sp, FRAME_SIZE
    
    # 5. ุจุงุฒฺฏุดุช
    ret
```

### ๐ ุงูฺฏู Wrapper Function

```assembly
# wrapper ุจุฑุง ุชุงุจุน ูพฺุฏู
easy_function:
    # ุชูุธู ูพุงุฑุงูุชุฑูุง ูพุดโูุฑุถ
    li   a2, 0           # ูพุงุฑุงูุชุฑ ุณูู = 0
    li   a3, 100         # ูพุงุฑุงูุชุฑ ฺูุงุฑู = 100
    
    # ูุฑุงุฎูุงู ุชุงุจุน ุงุตู
    jal  zero, complex_function
```

### ๐ฆ ุงูฺฏู Factory Function

```assembly
create_object:
    # ุชุฎุตุต ุญุงูุธู
    li   a0, 16          # ุงูุฏุงุฒู ุด
    li   a7, 9           # sbrk syscall
    ecall
    
    # ููุฏุงุฑุฏู ุงููู
    li   t0, 0
    sw   t0, 0(a0)       # field 1
    sw   t0, 4(a0)       # field 2
    sw   t0, 8(a0)       # field 3
    sw   t0, 12(a0)      # field 4
    
    ret                  # a0 = ุขุฏุฑุณ ุด
```

---

## ๐ ููุงุจุน ู ูุฑุงุฌุน

### ๐ ูุณุชูุฏุงุช

- [RISC-V Calling Convention](https://riscv.org/technical/specifications/)
- [RISC-V Assembly Programmer's Manual](https://github.com/riscv/riscv-asm-manual)

### ๐๏ธ ุงุจุฒุงุฑูุง

- **RARS**: ุดุจูโุณุงุฒ RISC-V
- **Spike**: ุดุจูโุณุงุฒ ISA ุฑุณู
- **QEMU**: ุดุจูโุณุงุฒ ุณุณุชู ฺฉุงูู

### ๐ ฺฉุชุงุจโูุง

1. "Computer Organization and Design: RISC-V Edition" - Patterson & Hennessy
2. "The RISC-V Reader" - Patterson & Waterman

### ๐ ููฺฉโูุง ููุฏ

- [RISC-V Green Card](https://www.cl.cam.ac.uk/teaching/1617/ECAD+Arch/files/docs/RISCVGreenCardv8-20151013.pdf)
- [RISC-V Cheat Sheet](https://mark.theis.site/riscv/)

---

## โ ุณูุงูุงุช ูุชุฏุงูู (FAQ)

### Q1: ฺู ุฒูุงู ุจุงุฏ ra ุฑุง ุฐุฎุฑู ฺฉููุ

**A:** ููุท ุฒูุงู ฺฉู ุชุงุจุน ุดูุง ุชุงุจุน ุฏฺฏุฑ ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ.

```assembly
# ูุงุฒ ุจู ุฐุฎุฑู ra
function_a:
    addi sp, sp, -4
    sw   ra, 0(sp)       # โ ุถุฑูุฑ
    jal  ra, function_b
    lw   ra, 0(sp)
    addi sp, sp, 4
    ret

# ูุงุฒ ูุณุช
leaf_function:
    # ุจุฏูู ูุฑุงุฎูุงู ุชุงุจุน
    ret                  # โ ra ุชุบุฑ ูฺฉุฑุฏู
```

### Q2: ุชูุงูุช s0 ู t0 ฺุณุชุ

**A:** 
- **s0-s11**: ุจุงุฏ ุชูุณุท callee ุญูุธ ุดููุฏ (callee-saved)
- **t0-t6**: ูุงุฒ ุจู ุญูุธ ูุฏุงุฑูุฏ (caller-saved)

### Q3: ฺฺฏููู ุขุฑฺฏููุงูโูุง ุจุด ุงุฒ 8 ุนุฏุฏ ุฑุง ูพุงุณ ุฏููุ

**A:** ุงุฒ ูพุดุชู ุงุณุชูุงุฏู ฺฉูุฏ:

```assembly
caller:
    # ุขุฑฺฏููุงูโูุง 1-8 ุฏุฑ a0-a7
    li   a0, 1
    # ...
    li   a7, 8
    
    # ุขุฑฺฏููุงู 9 ู ุจุดุชุฑ ุฏุฑ ูพุดุชู
    addi sp, sp, -8
    li   t0, 9
    sw   t0, 4(sp)       # arg 9
    li   t0, 10
    sw   t0, 0(sp)       # arg 10
    
    jal  ra, function
    
    addi sp, sp, 8
```

### Q4: Stack Overflow ฺฺฏููู ุฑุฎ ูโุฏูุฏุ

**A:** ุฒูุงู ฺฉู ุจุงุฒฺฏุดุช ุจโููุงุช ุง ุงุณุชูุงุฏู ุฒุงุฏ ุงุฒ ูพุดุชู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ.

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ base case ุฏุฑ ุจุงุฒฺฏุดุช
2. ุชุจุฏู ุจู ุชฺฉุฑุงุฑ
3. ุงุณุชูุงุฏู ุงุฒ tail recursion

---

## ๐ ุชูุฑูโูุง

### ุชูุฑู 1: ูพุงุฏูโุณุงุฒ strlen

```c
size_t strlen(const char *str);
```

<details>
<summary>๐ก ุฑุงูููุง</summary>

```assembly
strlen:
    li   t0, 0           # counter = 0
loop:
    add  t1, a0, t0      # address
    lbu  t2, 0(t1)       # load byte
    beq  t2, zero, done  # if '\0'
    addi t0, t0, 1       # counter++
    j    loop
done:
    mv   a0, t0          # return count
    ret
```
</details>

### ุชูุฑู 2: ูพุงุฏูโุณุงุฒ strcmp

```c
int strcmp(const char *s1, const char *s2);
```

### ุชูุฑู 3: ูพุงุฏูโุณุงุฒ memcpy

```c
void *memcpy(void *dest, const void *src, size_t n);
```

### ุชูุฑู 4: ุชูุงู (ุจุงุฒฺฏุดุช)

```c
int power(int base, int exp);
```

### ุชูุฑู 5: GCD (ุงูฺฏูุฑุชู ุงููุฏุณ)

```c
int gcd(int a, int b);
```

---

## ๐ ุฎูุงุตู ูฺฉุงุช ฺฉูุฏ

### โ ููุงูู ุทูุง

1. **ููุดู** sp ุฑุง ุจู ูุถุฑุจ 8 ุง 16 ุชุฑุงุฒ ฺฉูุฏ
2. **ููุดู** ุฑุฌุณุชุฑูุง s0-s11 ุฑุง ุญูุธ ฺฉูุฏ
3. **ููุดู** ra ุฑุง ุฐุฎุฑู ฺฉูุฏ (ุงฺฏุฑ ุชุงุจุน ูุฑุงุฎูุงู ูโฺฉูุฏ)
4. **ููุดู** sp ุฑุง ุฏุฑ epilogue ุจุงุฒฺฏุฑุฏุงูุฏ
5. **ููุดู** ูุชุฌู ุฑุง ุฏุฑ a0 ูุฑุงุฑ ุฏูุฏ

### ๐ฏ ุจูุชุฑู ุฑูุดโูุง

- ุงุฒ ุฑุฌุณุชุฑูุง ูููุช ุจุฑุง ูุญุงุณุจุงุช ฺฉูุชุงู ุงุณุชูุงุฏู ฺฉูุฏ
- ุงุฒ tail recursion ุจุฑุง ุจูููโุณุงุฒ ุจุงุฒฺฏุดุช ุงุณุชูุงุฏู ฺฉูุฏ
- ุงุฒ ุนููุงุช ุงุชู ุจุฑุง ููฺฏุงูโุณุงุฒ ุงุณุชูุงุฏู ฺฉูุฏ
- ฺฉุฏ ุฑุง ุจุง ฺฉุงููุช ูุณุชูุฏุณุงุฒ ฺฉูุฏ
- ุงุฒ magic numbers ุจุฑุง ุงุดฺฉุงูโุฒุฏุง ุงุณุชูุงุฏู ฺฉูุฏ

### โ๏ธ ุงุดุชุจุงูุงุช ุฑุงุฌ

- ูุฑุงููุด ุฐุฎุฑู/ุจุงุฒุงุจ ุฑุฌุณุชุฑูุง
- ุนุฏู ุชุฑุงุฒ ูพุดุชู
- stack overflow ุฏุฑ ุจุงุฒฺฏุดุช
- data race ุฏุฑ ุจุฑูุงููโูุง ฺูุฏ ูุฎ
- register clobbering

---

<div align="center">



[โฌ ุจุงุฒฺฏุดุช ุจู ุจุงูุง](#ุฒุฑุฑูุงูโูุง-ู-ุชูุงุจุน-ุฏุฑ-risc-v)

---


</div>

</div>
